$nav-icon-width:									28px !default;
$nav-icon-margin-right:								9px !default;

#left-panel {
	left: 0;
	top: 0;
	bottom:0;
	position: absolute;
	width: rem($nav-width);
	z-index: $depth-nav;
	background: $nav-background;
	will-change: left, right;

	//@extend %general-animation;

	.ngmenu-title {
		text-transform: uppercase;
		margin:0;
		color: $nav-title-color;
		border-bottom: 1px solid rgba($nav-title-border-bottom-color, 0.2);
		padding: rem(8px) rem($nav-padding-left);
		font-size: rem($nav-title-font-size);
		letter-spacing: 1px;
		font-weight: 500;
	}

	#primary-nav {
		overflow: auto;
		-webkit-overflow-scrolling: touch;
    	overflow-x: hidden;
		-webkit-backface-visibility: hidden; 
			backface-visibility: hidden;

		.ngmenu {
			padding-left: 0;
			list-style: none;

			b.collapse-sign {
				float: right;
				> .fa,
				>.#{$cust-icon-prefix} {
		    		font-size: rem($nav-font-link-size+1);
		    		vertical-align: text-bottom;
    				margin-right: rem(-3px);
					vertical-align: middle;
					font-size: rem($nav-font-link-size + 2);
		    	}
			}

			ul {
				padding-left: 0;
				list-style: none;
				display:none;
			}

			li {
				position: relative;

				&.open {
					> a {
						@include text-contrast($nav-background);
					}
				}

				&.active {

					> a {
						@include text-contrast($nav-background);
						background-color: darken($nav-base-color, 5%);
						@include box-shadow(inset 3px 0 0 $color-primary);
						font-weight: 500;

						&:hover {

							>.fa,
							>.#{$cust-icon-prefix} {
							    color:$nav-icon-hover-color;
							}

						}

					}

					> ul {
						display: block;
						padding-bottom: rem(10px);
					}
				}

				a {
					display: block;
					outline: 0;
					padding: rem($nav-padding-top) rem($nav-padding-right) rem($nav-padding-bottom) rem($nav-padding-left);
					font-size: rem($nav-font-link-size);
					color: $nav-link-color;
					max-height: rem($nav-link-height);
					line-height: inherit;
					font-weight: 400;
					text-decoration: none;

					.ngmenu-link-text {

						.dl-ref {
							font-size: rem($nav-dl-font-size);
							text-align: center;
							min-width: rem($nav-dl-width);
							height: rem($nav-dl-height);
							display: inline-block;
							border-radius: rem($nav-dl-border-radius);
							letter-spacing: rem(0.5px);
							vertical-align: text-bottom;
							margin-left: rem(-$nav-dl-margin-left);
							margin-right: rem($nav-dl-margin-right);
							font-weight:500;
							overflow:hidden;
							padding: 0 rem(2px);
							-webkit-font-smoothing: subpixel-antialiased;

							&.label {
								margin-left:0;
								margin-right: $spacer * 0.25;
								padding: 0 rem(4px);
								font-weight: 400;
								color: rgba(255,255,255,0.7);
							}
						}

					}

					> .ngmenu-btn-sub-collapse {
						position: absolute;
						right: rem($nav-padding-left);
						top: rem(10px);
					}

					> .badge {

						@extend %ping-badge;

						& + .fa,
						& + .#{$cust-icon-prefix} {
							display: none;
						}

					}

					>.fa,
					>.#{$cust-icon-prefix} {
						margin-right:rem($nav-icon-margin-right);
						font-size:rem($nav-font-icon-size);
						width:rem($nav-icon-width);
						text-align: center;
					    vertical-align: middle;
					    color:$nav-icon-color;
					} 

					& > .ngmenu-link-text {
						vertical-align: middle;
						display: inline-block;
					}

					& > .badge:not(.clear-badge):first-child  {
						position: static;
						display: inline-block;
						border-radius: 5px;
						margin-right: 10px;
						width: 28px;
						height: auto;
						padding: 4px 0;
						font-size: $font-size-base;
						vertical-align: middle;
					}

					&.collapsed {
						.ngmenu-btn-sub-collapse {
							@include rotate(180deg);
						}
					}

					&:hover {
						@include text-contrast(rgba(lighten($nav-base-color, 1%), (80/100)))
						text-decoration: none;
						background-color: rgba(lighten($nav-base-color, 1%), (80/100));
						//@include box-shadow(inset rem(3px) 0 0 transparent);

						.badge {
							color: $nav-badge-color;
						}

						>.fa,
						>.#{$cust-icon-prefix} {
							color:$nav-icon-hover-color;
						}

						> .badge {
							box-shadow: 0 0 0 1px rgba(lighten($nav-base-color, 1%), (80/100));
							border: 1px solid rgba(lighten($nav-base-color, 1%), (80/100));
						}
					
					}

					&:focus {
						@include text-contrast( rgba(darken($nav-base-color, 5% ), (50/100)) );
						//text-decoration: none;
						//background-color: rgba(darken($nav-base-color, 5% ), (50/100));
						//@include box-shadow(inset rem(3px) 0 0 rgba($color-primary, (40/100)));

						.badge {
							color: $nav-badge-color;
						}
					}

					& + .ngmenu-sub-one {
						padding-bottom: rem($nav-link-height - $nav-sub-link-height);

						li {
							a {
							    padding-left: rem($nav-padding-left + $nav-icon-width + 12.5px);
							    padding-top: rem(6px);
							    padding-bottom: rem(6px);
							    font-size: rem($base-font-size);
							    min-height: $nav-sub-link-height;
							    max-height: none;

							    >.fa,
							    >.#{$cust-icon-prefix} {
									margin-right:0;
									width:auto;
								}

							    b.collapse-sign {
							    	>.fa,
							    	>.#{$cust-icon-prefix} {
							    		font-size: rem($base-font-size); 
							    		margin-right: rem(-2px);
							    	}
							    }
			
							}
							&:last-child {
								.ngmenu-sub-two {
									padding-bottom:0;
								}
							}
						}
					}

				} 

				// Sub nav level 1
				.ngmenu-sub-one {
					background-color: darken($nav-base-color, 11%);

					li {

						&.active {
							
							> a {
								@include text-contrast(rgba(lighten(darken($nav-base-color, 11%), 5%), (45/100)))
								background-color: rgba(lighten(darken($nav-base-color, 11%), 5%), (45/100));
								@include box-shadow(inset rem(3px) 0 0 rgba($color-primary, (50/100)) );
								font-weight: 500;

								> .ngmenu-link-text {
									>.fa,
									>.#{$cust-icon-prefix} {
									    @include text-contrast(rgba(lighten(darken($nav-base-color, 11%), 5%), (45/100)));
									}
								}	

								&:hover {
									> .ngmenu-link-text {
										>.fa,
										>.#{$cust-icon-prefix} {
										    color:$nav-icon-hover-color;
										}
									}			
								}
							}
						}

						a {
							display: block;
							color: lighten(darken($nav-base-color, 11%),55%);
							padding-left:rem(50px);

							>.fa,
							>.#{$cust-icon-prefix} {
								padding-right: rem(6px);
								color: $nav-icon-color;
							}

							> .ngmenu-link-text {
								>.fa,
								>.#{$cust-icon-prefix} {
									margin-left: rem(-35px);
    								margin-right: rem(12px);
    								margin-top:rem(-2px);
									font-size:rem($nav-font-icon-size-sub);
									vertical-align: middle;
									color:$nav-icon-color;
									font-size:rem($nav-font-icon-size-sub - 4);
									min-width: $nav-dl-width;
									text-align: center;
								}
							}

							> .badge {
								color: $nav-badge-color;
								background-color: $nav-badge-bg-color;
								border: 1px solid darken($color-fusion, 0%);

							}
							
							&:hover {
								@include text-contrast(rgba(lighten(darken($nav-base-color, 11%), 5%), (45/100)));
								background-color: rgba(lighten(darken($nav-base-color, 11%), 5%), (45/100));
								
								//@include box-shadow(inset rem(3px) 0 0 rgba($color-primary, (50/100)) );

								> .ngmenu-link-text {
									>.fa,
									>.#{$cust-icon-prefix} {
									    color:$nav-icon-hover-color;
									}
								}
							}

						}

						// Sub nav level 2
						.ngmenu-sub-two {
							background-color: darken($nav-base-color, 13%);
							padding-bottom:10px;

							li {
								border-top-color: 1px solid darken($color-fusion, 3%);

								&.active {
									> a {
										//background-color: darken($nav-base-color, 13%);
										@include text-contrast( rgba(lighten(darken($nav-base-color, 11%), 5%), (20/100)) )
										background-color: rgba(lighten(darken($nav-base-color, 11%), 5%), (20/100));
										@include box-shadow(inset rem(3px) 0 0 rgba($color-primary, (20/100)) );
									}
								}

								a {
									color: lighten(darken($nav-base-color, 11%),55%);
									padding-left: rem($nav-padding-left + $nav-icon-width + 12.5);
									padding-top: rem(6px);
									padding-bottom: rem(6px);
									font-size:rem(12.5px);
									min-height: auto;

									.dl-ref {
										margin-left: 0;
										margin-right: $nav-icon-margin-right;
									}
									
									> .ngmenu-link-text {
										>.fa,
										>.#{$cust-icon-prefix} {
											margin-left: 0;
											margin-right: $nav-icon-margin-right;
										}
									}

									&:hover {
										
										background-color: rgba(lighten(darken($nav-base-color, 11%), 5%), (20/100));
										@include text-contrast( rgba(lighten(darken($nav-base-color, 11%), 5%), (45/100)) )
										//@include box-shadow( inset rem(3px) 0 0 rgba($color-primary, (40/100)) );
									}

									> .badge {
										color: $nav-badge-color;
										background-color: $nav-badge-bg-color;
										border: 1px solid darken($color-fusion, 0%);
									}

								}

							}
						}

					}
				} 

				&:last-child {
					margin-bottom:0;
				}
			}

			&:last-child {
				margin-bottom:0;
			}
		} 

	}

}

#index:not(.nav-function-top) {

	#primary-nav {

		.ngmenu {

			a,
			a:hover,
			a:focus {

				.badge-detached {
					
					display: inline-block;
					font-family: 'helvetica neue', helvetica, arial, sans-serif;
					font-size: rem(11px);
					line-height: 1.3;
					min-height: rem(13px);
					min-width: rem($nav-badge-height+4);
					background-color: #fff;
					border: 1px solid #33383e;
					border-radius: 3px;
					color: #33383E;
					padding: 1px 5px;
					right: rem(15px);
					left: auto;
					top: rem(13px);
					width: auto;
					max-width: 0;
					height: auto;

					-webkit-font-smoothing: subpixel-antialiased;
				}

			}

		}

	}

}

.ngmenu a,
.ngmenu a > .fa,
.ngmenu a > .#{$cust-icon-prefix} {
	@include transition(0.3s,ease-out);
}


@include media-breakpoint-up(xl) {
	
	#left-panel {

		#primary-nav {

			.ngmenu {

				> li {

					> a {
						font-size: $nav-font-link-size + 1;
					}

				}
			}
		}
	}
}