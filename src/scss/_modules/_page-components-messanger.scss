$msgr-list-width: 233px;
$msgr-list-width-collapsed: 50px;

$chat-rcvd-background: adjust-hue(lighten($primary-500, 39%), -6); //#DCF2FA;
$chat-sent-background: $primary-500;

$animation-delay: 100ms;

#msgr_listfilter_input {
	width: unquote("calc(100% - #{$p-3})");
	margin: 0 auto;
	margin-top: -41px;
	padding-left: 41px;
	margin-bottom: 10px;
	opacity: 0; 
	background: transparent;
	@extend %general-animation;
	transition-delay: $animation-delay;  	
}

.msgr-list {
	width: $msgr-list-width;
    position: absolute;
    right: $msgr-list-width-collapsed - $msgr-list-width;
    top: 0;
    bottom: 0;

    border-left: 1px dashed rgba(0,0,0,0.1);
    z-index: 101;

    @extend %general-animation;
    transition-delay: $animation-delay;

	& + .msgr {

		width: unquote("calc(100% - #{$msgr-list-width-collapsed})");
		height: 100%;

		&:before {
			content:'';
			height:100%;
			width:100%;
			background:rgba($white, 0.4);	
			position:absolute;
			z-index: 100;

			@extend %general-animation;
			transition-delay: $animation-delay;

			opacity: 0;
			visibility: hidden;
		}
	}

    &:hover {
    	right: 0;
    	border-left-color: rgba(0,0,0,0.1);

    	#msgr_listfilter_input {
    		opacity: 1;
    	}

    	& + .msgr {

    		&:before {
    			opacity: 1;
    			visibility: visible;
    		}
    	}
    }
}

.msgr-list--item {
	font-size: 21px;
	display: flex;
	flex-direction: column;
	justify-content: center;
	height: 50px; 

	color: $primary-500;
}

.msgr-list__icon {
	width: $msgr-list-width-collapsed;
	text-align: center;
}

.msgr-user {
	height: 75px;
	border-bottom: 1px solid rgba($black,0.07);
}	

.msgr-user--name {
	font-size: 15px;
	margin: 0;
}

.msgr-chatinput {

	min-height: 110px;
	max-height: 160px;

	[contenteditable="true"] {
		min-height:50px;
		max-height:110px;
	}

}

.msgr-chatinput__icons {
	height: 40px;
}

.msgr-chatinput__container {
	> div {
		border-top: 1px solid rgba($black,0.07);
	}
}


/* IE HACK */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
	[contenteditable="true"] {
		height: 50px;
	}
}

.chat-message {
	padding: $p-2 + $p-1;
	border-radius: 10px;

	position: relative;

	display: inline-block;

	> p {
		padding: $p-2 + $p-1 0 0;
		margin:0;
	}

	> p:first-child {
		padding-top: 0;
	}
}

.chat-message-image-send {
	border-radius: 0 0 $border-radius * 2 $border-radius * 2;
}

.chat-start {

	margin-bottom: 3px !important;
	
	.time-stamp,
	.chat-img {
		display: none;
	}

	& + .chat-segment:not(.chat-end) {

		margin-bottom: 3px !important;

		.time-stamp,
		.chat-img {
			display: none;
		}

	}
}

.chat-segment--rcvd {

	text-align: left;
	position: relative;

	margin: 0 $p-4 $p-2 $profile-image-width-sm + 5;

	&.chat-start {

		.chat-message {
			border-bottom-left-radius: 3px;
		}

		+ :not(.chat-end) {
			.chat-message {
				border-bottom-left-radius: 3px;
				border-top-left-radius: 3px;
			}
		}
	}

	&.chat-end {
		.chat-message {
			border-top-left-radius: 3px;
		}
	}

	.chat-img {
		position: absolute;
		left: - ($profile-image-width-sm + 5px);
		bottom: $profile-image-width-sm;
	}

	.chat-message {
		background: $chat-rcvd-background;
		@include text-contrast($chat-rcvd-background);	

		text-align: left;			
	}
}

.chat-segment--sent {

	text-align: right;
	position: relative;

	margin: 0 0 $p-2 $p-4 + rem($profile-image-width-sm + 5px);

	&.chat-start {

		.chat-message {
			border-bottom-right-radius: 3px;
		}

		+ :not(.chat-end) {
			.chat-message {
				border-bottom-right-radius: 3px;
				border-top-right-radius: 3px;
			}
		}
	}

	&.chat-end {
		.chat-message {
			border-top-right-radius: 3px;
		}
	}

	.chat-message {
		background: $chat-sent-background;
		@include text-contrast($chat-sent-background);

		text-align: left;			
	}

}